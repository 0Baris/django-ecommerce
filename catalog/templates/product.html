{% extends 'base.html' %}
{% load static %}

{% block title %} {{ product.name }} {% endblock %}

{% block content %}

<div class="container my-4">

    <nav aria-label="breadcrumb">
        <ol class="breadcrumb">
            <li class="breadcrumb-item">
                <a href="{% url 'index' %}">Anasayfa</a>
            </li>
            <li class="breadcrumb-item">
                <a href="{% url 'category' product.category.slug %}">{{ product.category.name }}</a>
            </li>
            <li class="breadcrumb-item active" aria-current="page">{{ product.name }}</li>
        </ol>
      </nav>

    <div class="row my-2 mt-2">
      <div class="col-md-6">
        <div class="product-img mb-3">
          <img id="main-product-image" src="{{ product.image.url }}" alt="Main Product Image" class="main-image">
        </div>

        <div class="d-flex justify-content-center">
          <img src="{{ product.image.url }}" class="thumbnail me-2 product-image-frame thumbnail-image" alt="Ürün Resmi" style="width:100px; height:100px;">
          {% for image in product.images.all %}
              <img src="{{ image.image.url }}" class="thumbnail me-2 product-image-frame thumbnail-image" alt="Ürün Resmi" style="width:100px; height:100px;">
          {% endfor %}
      </div>
      
      </div>


      <div class="col-md-6">
        <h2 class="product-title">{{ product.name }}</h2>
        <p class="rating">
          ★★★★★ <span>(1581 Yorum)</span>
        </p>
        <h3 class="price">{{ product.price }} TL</h3>

        <div class="my-3">
            <label for="quantity" class="form-label">Adet:</label>
            <div class="input-group" style="width: 150px;">
                <input type="number" class="form-control text-center" id="quantity" value="1" min="1" max="{{ product.quantity }}">
            </div>
        </div>

        <button class="btn btn-primary btn-lg w-100">Sepete Ekle</button>

        <div class="mt-4">
          <p><strong>Ürün Açıklaması:</strong></p>
          <p>{{ product.description }}</p>
        </div>
      </div>
    </div>
  </div>

{% endblock %}

{% block js %}
<script>
  document.querySelectorAll('.thumbnail').forEach(thumbnail => {
    thumbnail.addEventListener('click', function () {
      const mainImage = document.getElementById('main-product-image');
      mainImage.src = this.src;
    });
  });
</script>

{% endblock %}